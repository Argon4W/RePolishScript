printf = (value) -> {
    push $value;
    call "write";
};

println = (value) -> {
    push $value + "\n";
    call "write";
};

printf = (value, fmt) -> {
    push ($value, $fmt) -> $sprintf;
    call "write";
};

sprintf = (value, fmt) -> {
    index = 0;
    result = "";
    state = false;

    for (c in $value) {
        if ($c == "%" && $state == false) {
            $state = true;
            continue;
        };

        if ($state == true && $c == "%") {
            $state = false;
            $result += "%";
            continue;
        };

        if ($state == true && $c == "n") {
            $state = false;
            $result += "\n";
            continue;
        };

        if ($state == true && $c == "s") {
            $state = false;
            $result += $index in $fmt;
            $index += 1;
            continue;
        };

        if ($state == false) {
            $result += $c;
        };
    };

    return $result;
};

read = () -> {
    return (call "read");
};

listToString = (listValue) -> {
    if (len $listValue == 0) {
        return "[]";
    };

    result = "[" + 0 in $listValue;

    for (value in (1 to (len $listValue) in $listValue)) {
        $result += ", " + $value;
    };

    return $result + "]";
};
